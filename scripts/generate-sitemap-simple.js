const fs = require("fs");
const path = require("path");

// Manually define the structure based on the actual file
// This ensures accuracy
const STATES = [
  {
    slug: "florida",
    cities: [
      "miami",
      "orlando",
      "tampa",
      "jacksonville",
      "st-petersburg",
      "fort-lauderdale",
      "cape-coral",
      "sarasota",
      "naples",
      "west-palm-beach",
      "boca-raton",
      "kissimmee",
      "lakeland",
      "bradenton",
      "fort-myers",
      "daytona-beach",
      "pensacola",
      "palm-bay",
      "port-st-lucie",
      "ocala",
    ],
  },
  {
    slug: "california",
    cities: [
      "los-angeles",
      "san-diego",
      "san-jose",
      "sacramento",
      "fresno",
      "long-beach",
      "anaheim",
      "riverside",
      "bakersfield",
      "oakland",
      "santa-ana",
      "irvine",
      "chula-vista",
      "stockton",
      "modesto",
      "oxnard",
      "fontana",
      "huntington-beach",
      "glendale",
      "fremont",
    ],
  },
  {
    slug: "texas",
    cities: [
      "houston",
      "dallas",
      "san-antonio",
      "austin",
      "fort-worth",
      "el-paso",
      "arlington",
      "plano",
      "corpus-christi",
      "lubbock",
      "laredo",
      "irving",
      "garland",
      "frisco",
      "mckinney",
      "grand-prairie",
      "brownsville",
      "round-rock",
      "waco",
      "killeen",
    ],
  },
  {
    slug: "arizona",
    cities: [
      "phoenix",
      "tucson",
      "mesa",
      "chandler",
      "gilbert",
      "scottsdale",
      "glendale",
      "peoria",
      "tempe",
      "surprise",
      "goodyear",
      "avondale",
      "buckeye",
      "queen-creek",
      "prescott",
      "flagstaff",
      "casa-grande",
      "maricopa",
      "bullhead-city",
      "lake-havasu-city",
    ],
  },
  {
    slug: "nevada",
    cities: [
      "las-vegas",
      "henderson",
      "reno",
      "north-las-vegas",
      "sparks",
      "carson-city",
      "pahrump",
      "boulder-city",
      "elko",
      "mesquite",
      "spring-valley",
      "sunrise-manor",
      "paradise",
      "whitney",
      "enterprise",
      "winchester",
      "summerlin",
      "incline-village",
      "laughlin",
      "fernley",
    ],
  },
  {
    slug: "georgia",
    cities: [
      "atlanta",
      "augusta",
      "savannah",
      "athens",
      "macon",
      "columbus",
      "roswell",
      "albany",
      "johns-creek",
      "sandy-springs",
      "warner-robins",
      "smyrna",
      "dunwoody",
      "marietta",
      "brookhaven",
      "peachtree-city",
      "canton",
      "milton",
      "kennesaw",
      "woodstock",
    ],
  },
  {
    slug: "north-carolina",
    cities: [
      "charlotte",
      "raleigh",
      "greensboro",
      "durham",
      "winston-salem",
      "fayetteville",
      "cary",
      "wilmington",
      "high-point",
      "asheville",
      "concord",
      "gastonia",
      "greenville",
      "huntersville",
      "chapel-hill",
      "jacksonville",
      "rocky-mount",
      "mooresville",
      "kannapolis",
      "apex",
    ],
  },
  {
    slug: "south-carolina",
    cities: [
      "charleston",
      "columbia",
      "north-charleston",
      "mount-pleasant",
      "rock-hill",
      "greenville",
      "summerville",
      "goose-creek",
      "hilton-head",
      "myrtle-beach",
      "florence",
      "aiken",
      "anderson",
      "spartanburg",
      "lexington",
      "simpsonville",
      "conway",
      "hanahan",
      "greer",
      "mauldin",
    ],
  },
  {
    slug: "tennessee",
    cities: [
      "nashville",
      "memphis",
      "knoxville",
      "chattanooga",
      "clarksville",
      "murfreesboro",
      "franklin",
      "johnson-city",
      "hendersonville",
      "jackson",
      "kingsport",
      "bartlett",
      "collierville",
      "germantown",
      "smyrna",
      "brentwood",
      "spring-hill",
      "cookeville",
      "gallatin",
      "maryville",
    ],
  },
  {
    slug: "alabama",
    cities: [
      "birmingham",
      "montgomery",
      "mobile",
      "huntsville",
      "tuscaloosa",
      "hoover",
      "auburn",
      "dothan",
      "decatur",
      "florence",
      "phenix-city",
      "madison",
      "gadsden",
      "prattville",
      "enterprise",
      "vestavia-hills",
      "alabaster",
      "opelika",
      "daphne",
      "foley",
    ],
  },
  {
    slug: "louisiana",
    cities: [
      "new-orleans",
      "baton-rouge",
      "shreveport",
      "lafayette",
      "lake-charles",
      "kenner",
      "bossier-city",
      "monroe",
      "alexandria",
      "houma",
      "marrero",
      "central",
      "laplace",
      "metairie",
      "slidell",
      "mandeville",
      "sulphur",
      "harvey",
      "opelousas",
      "chalmette",
    ],
  },
  {
    slug: "mississippi",
    cities: [
      "jackson",
      "gulfport",
      "southaven",
      "hattiesburg",
      "biloxi",
      "meridian",
      "tupelo",
      "greenville",
      "olive-branch",
      "horn-lake",
      "clinton",
      "madison",
      "pearl",
      "ridgeland",
      "starkville",
      "columbus",
      "vicksburg",
      "pascagoula",
      "natchez",
      "ocean-springs",
    ],
  },
  {
    slug: "oklahoma",
    cities: [
      "oklahoma-city",
      "tulsa",
      "norman",
      "broken-arrow",
      "lawton",
      "edmond",
      "moore",
      "midwest-city",
      "enid",
      "stillwater",
      "muskogee",
      "bartlesville",
      "owasso",
      "shawnee",
      "ponca-city",
      "ardmore",
      "duncan",
      "bixby",
      "jenks",
      "yukon",
    ],
  },
  {
    slug: "arkansas",
    cities: [
      "little-rock",
      "fort-smith",
      "fayetteville",
      "jonesboro",
      "north-little-rock",
      "conway",
      "rogers",
      "pine-bluff",
      "bentonville",
      "hot-springs",
      "texarkana",
      "sherwood",
      "springdale",
      "west-memphis",
      "bryant",
      "paragould",
      "cabot",
      "van-buren",
      "searcy",
      "batesville",
    ],
  },
  {
    slug: "missouri",
    cities: [
      "kansas-city",
      "st-louis",
      "springfield",
      "columbia",
      "independence",
      "lees-summit",
      "o-fallon",
      "st-joseph",
      "st-charles",
      "st-peters",
      "blue-springs",
      "florissant",
      "joplin",
      "chesterfield",
      "jefferson-city",
      "cape-girardeau",
      "wildwood",
      "university-city",
      "ballwin",
      "liberty",
    ],
  },
  {
    slug: "kentucky",
    cities: [
      "louisville",
      "lexington",
      "bowling-green",
      "owensboro",
      "covington",
      "hopkinsville",
      "richmond",
      "florence",
      "georgetown",
      "henderson",
      "elizabethtown",
      "nicholasville",
      "jeffersontown",
      "frankfort",
      "paducah",
      "radcliff",
      "ashland",
      "madisonville",
      "murray",
      "st-matthews",
    ],
  },
  {
    slug: "virginia",
    cities: [
      "virginia-beach",
      "norfolk",
      "chesapeake",
      "richmond",
      "newport-news",
      "alexandria",
      "hampton",
      "portsmouth",
      "suffolk",
      "roanoke",
      "lynchburg",
      "harrisonburg",
      "leesburg",
      "charlottesville",
      "danville",
      "blacksburg",
      "manassas",
      "petersburg",
      "fredericksburg",
      "winchester",
    ],
  },
  {
    slug: "maryland",
    cities: [
      "baltimore",
      "frederick",
      "rockville",
      "gaithersburg",
      "bowie",
      "annapolis",
      "college-park",
      "salisbury",
      "laurel",
      "greenbelt",
      "cumberland",
      "westminster",
      "hyattsville",
      "takoma-park",
      "hagerstown",
      "easton",
      "ellicott-city",
      "germantown",
      "bethesda",
      "silver-spring",
    ],
  },
  {
    slug: "delaware",
    cities: [
      "wilmington",
      "dover",
      "newark",
      "middletown",
      "smyrna",
      "milford",
      "seaford",
      "georgetown",
      "elsmere",
      "new-castle",
      "rehoboth-beach",
      "lewes",
      "laurel",
      "harrington",
      "camden",
      "bridgeville",
      "felton",
      "milton",
      "bethany-beach",
      "ocean-view",
    ],
  },
  {
    slug: "new-jersey",
    cities: [
      "newark",
      "jersey-city",
      "paterson",
      "elizabeth",
      "edison",
      "woodbridge",
      "lakewood",
      "toms-river",
      "hamilton",
      "trenton",
      "clifton",
      "camden",
      "brick",
      "cherry-hill",
      "passaic",
      "union-city",
      "bayonne",
      "east-orange",
      "vineland",
      "new-brunswick",
    ],
  },
  {
    slug: "pennsylvania",
    cities: [
      "philadelphia",
      "pittsburgh",
      "allentown",
      "erie",
      "reading",
      "scranton",
      "bethlehem",
      "lancaster",
      "harrisburg",
      "altoona",
      "york",
      "state-college",
      "wilkes-barre",
      "chester",
      "williamsport",
      "easton",
      "lebanon",
      "hazleton",
      "johnstown",
      "new-castle",
    ],
  },
  {
    slug: "new-york",
    cities: [
      "new-york",
      "buffalo",
      "rochester",
      "yonkers",
      "syracuse",
      "albany",
      "new-rochelle",
      "mount-vernon",
      "schenectady",
      "utica",
      "white-plains",
      "hempstead",
      "troy",
      "niagara-falls",
      "binghamton",
      "freeport",
      "valley-stream",
      "long-beach",
      "rome",
      "ithaca",
    ],
  },
  {
    slug: "connecticut",
    cities: [
      "bridgeport",
      "new-haven",
      "hartford",
      "stamford",
      "waterbury",
      "norwalk",
      "danbury",
      "new-britain",
      "west-hartford",
      "greenwich",
      "hamden",
      "meriden",
      "bristol",
      "west-haven",
      "milford",
      "middletown",
      "norwich",
      "shelton",
      "torrington",
      "new-london",
    ],
  },
  {
    slug: "massachusetts",
    cities: [
      "boston",
      "worcester",
      "springfield",
      "lowell",
      "cambridge",
      "new-bedford",
      "brockton",
      "quincy",
      "lynn",
      "fall-river",
      "newton",
      "lawrence",
      "somerville",
      "framingham",
      "haverhill",
      "waltham",
      "malden",
      "brookline",
      "plymouth",
      "medford",
    ],
  },
  {
    slug: "rhode-island",
    cities: [
      "providence",
      "warwick",
      "cranston",
      "pawtucket",
      "east-providence",
      "woonsocket",
      "newport",
      "central-falls",
      "west-warwick",
      "cumberland",
      "north-providence",
      "south-kingstown",
      "johnston",
      "north-kingstown",
      "barrington",
      "middletown",
      "bristol",
      "narragansett",
      "tiverton",
      "portsmouth",
    ],
  },
  {
    slug: "vermont",
    cities: [
      "burlington",
      "essex",
      "south-burlington",
      "colchester",
      "rutland",
      "montpelier",
      "barre",
      "st-albans",
      "brattleboro",
      "milton",
      "hartford",
      "williston",
      "bennington",
      "middlebury",
      "shelburne",
      "swanton",
      "st-johnsbury",
      "winooski",
      "norwich",
      "jericho",
    ],
  },
  {
    slug: "new-hampshire",
    cities: [
      "manchester",
      "nashua",
      "concord",
      "derry",
      "rochester",
      "dover",
      "salem",
      "merrimack",
      "londonderry",
      "hudson",
      "keene",
      "bedford",
      "portsmouth",
      "goffstown",
      "hampton",
      "milford",
      "durham",
      "exeter",
      "hooksett",
      "pelham",
    ],
  },
  {
    slug: "maine",
    cities: [
      "portland",
      "lewiston",
      "bangor",
      "south-portland",
      "auburn",
      "biddeford",
      "sanford",
      "saco",
      "augusta",
      "westbrook",
      "waterville",
      "presque-isle",
      "caribou",
      "ellsworth",
      "old-orchard-beach",
      "bath",
      "calais",
      "eastport",
      "fort-kent",
      "houlton",
    ],
  },
  {
    slug: "ohio",
    cities: [
      "columbus",
      "cleveland",
      "cincinnati",
      "toledo",
      "akron",
      "dayton",
      "parma",
      "canton",
      "youngstown",
      "lorain",
      "hamilton",
      "springfield",
      "kettering",
      "elyria",
      "lakewood",
      "cuyahoga-falls",
      "middletown",
      "newark",
      "mansfield",
      "mentor",
    ],
  },
  {
    slug: "indiana",
    cities: [
      "indianapolis",
      "fort-wayne",
      "evansville",
      "south-bend",
      "carmel",
      "fishers",
      "bloomington",
      "hammond",
      "gary",
      "muncie",
      "terre-haute",
      "kokomo",
      "anderson",
      "noblesville",
      "greenwood",
      "elkhart",
      "mishawaka",
      "lawrence",
      "jeffersonville",
      "columbus",
    ],
  },
  {
    slug: "illinois",
    cities: [
      "chicago",
      "aurora",
      "naperville",
      "joliet",
      "rockford",
      "elgin",
      "peoria",
      "champaign",
      "waukegan",
      "cicero",
      "bloomington",
      "arlington-heights",
      "evanston",
      "decatur",
      "schaumburg",
      "bolingbrook",
      "palatine",
      "skokie",
      "des-plaines",
      "orland-park",
    ],
  },
  {
    slug: "michigan",
    cities: [
      "detroit",
      "grand-rapids",
      "warren",
      "sterling-heights",
      "lansing",
      "ann-arbor",
      "flint",
      "dearborn",
      "livonia",
      "troy",
      "westland",
      "farmington-hills",
      "kalamazoo",
      "wyoming",
      "southfield",
      "rochester-hills",
      "taylor",
      "pontiac",
      "st-clair-shores",
      "royal-oak",
    ],
  },
  {
    slug: "wisconsin",
    cities: [
      "milwaukee",
      "madison",
      "green-bay",
      "kenosha",
      "racine",
      "appleton",
      "waukesha",
      "oshkosh",
      "eau-claire",
      "janesville",
      "west-allis",
      "la-crosse",
      "sheboygan",
      "wauwatosa",
      "fond-du-lac",
      "new-berlin",
      "stevens-point",
      "beloit",
      "brookfield",
      "superior",
    ],
  },
  {
    slug: "minnesota",
    cities: [
      "minneapolis",
      "st-paul",
      "rochester",
      "duluth",
      "bloomington",
      "brooklyn-park",
      "plymouth",
      "st-cloud",
      "eagan",
      "woodbury",
      "maple-grove",
      "eden-prairie",
      "coon-rapids",
      "burnsville",
      "minnetonka",
      "apple-valley",
      "edina",
      "richfield",
      "moorhead",
      "mankato",
    ],
  },
  {
    slug: "iowa",
    cities: [
      "des-moines",
      "cedar-rapids",
      "davenport",
      "sioux-city",
      "iowa-city",
      "waterloo",
      "council-bluffs",
      "ames",
      "west-des-moines",
      "dubuque",
      "ankeny",
      "urbandale",
      "cedar-falls",
      "marion",
      "bettendorf",
      "mason-city",
      "marshalltown",
      "ottumwa",
      "fort-dodge",
      "muscatine",
    ],
  },
  {
    slug: "utah",
    cities: [
      "salt-lake-city",
      "west-valley-city",
      "provo",
      "west-jordan",
      "ogden",
      "st-george",
      "layton",
      "taylorsville",
      "south-jordan",
      "lehi",
      "logan",
      "murray",
      "draper",
      "orem",
      "riverton",
      "spanish-fork",
      "roy",
      "cedar-city",
      "payson",
      "sandy",
    ],
  },
  {
    slug: "colorado",
    cities: [
      "denver",
      "colorado-springs",
      "aurora",
      "fort-collins",
      "lakewood",
      "thornton",
      "arvada",
      "westminster",
      "pueblo",
      "centennial",
      "boulder",
      "greeley",
      "longmont",
      "loveland",
      "grand-junction",
      "broomfield",
      "northglenn",
      "commerce-city",
      "parker",
      "brighton",
    ],
  },
];

const SERVICES = [
  { slug: "pool-installation" },
  { slug: "pool-repair" },
  { slug: "pool-cleaning" },
  { slug: "pool-resurfacing" },
  { slug: "pool-remodeling" },
];

// Generate sitemap
const domain = "https://poolquotesnow.com";
const today = new Date().toISOString().split("T")[0];

let sitemap = '<?xml version="1.0" encoding="UTF-8"?>\n';
sitemap += '<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">\n';

// Homepage
sitemap += "  <url>\n";
sitemap += `    <loc>${domain}/</loc>\n`;
sitemap += "    <priority>1.0</priority>\n";
sitemap += "    <changefreq>daily</changefreq>\n";
sitemap += `    <lastmod>${today}</lastmod>\n`;
sitemap += "  </url>\n";

// Services page
sitemap += "  <url>\n";
sitemap += `    <loc>${domain}/services</loc>\n`;
sitemap += "    <priority>0.9</priority>\n";
sitemap += "    <changefreq>weekly</changefreq>\n";
sitemap += `    <lastmod>${today}</lastmod>\n`;
sitemap += "  </url>\n";

// State pages
STATES.forEach((state) => {
  sitemap += "  <url>\n";
  sitemap += `    <loc>${domain}/${state.slug}</loc>\n`;
  sitemap += "    <priority>0.8</priority>\n";
  sitemap += "    <changefreq>weekly</changefreq>\n";
  sitemap += `    <lastmod>${today}</lastmod>\n`;
  sitemap += "  </url>\n";
});

// City pages
STATES.forEach((state) => {
  state.cities.forEach((citySlug) => {
    sitemap += "  <url>\n";
    sitemap += `    <loc>${domain}/${state.slug}/${citySlug}</loc>\n`;
    sitemap += "    <priority>0.7</priority>\n";
    sitemap += "    <changefreq>monthly</changefreq>\n";
    sitemap += `    <lastmod>${today}</lastmod>\n`;
    sitemap += "  </url>\n";
  });
});

// Service-in-city pages
STATES.forEach((state) => {
  state.cities.forEach((citySlug) => {
    SERVICES.forEach((service) => {
      sitemap += "  <url>\n";
      sitemap += `    <loc>${domain}/${state.slug}/${citySlug}/${service.slug}</loc>\n`;
      sitemap += "    <priority>0.6</priority>\n";
      sitemap += "    <changefreq>monthly</changefreq>\n";
      sitemap += `    <lastmod>${today}</lastmod>\n`;
      sitemap += "  </url>\n";
    });
  });
});

sitemap += "</urlset>";

// Write sitemap
const sitemapPath = path.join(__dirname, "../public/sitemap.xml");
fs.writeFileSync(sitemapPath, sitemap);

// Calculate totals
const totalStates = STATES.length;
const totalCities = STATES.reduce((sum, s) => sum + s.cities.length, 0);
const totalServiceInCity = totalCities * SERVICES.length;
const totalUrls = 1 + 1 + totalStates + totalCities + totalServiceInCity;

console.log("‚úÖ Sitemap generated successfully!");
console.log(`üìä Total URLs: ${totalUrls}`);
console.log(`   - Homepage: 1`);
console.log(`   - Services: 1`);
console.log(`   - States: ${totalStates}`);
console.log(`   - Cities: ${totalCities}`);
console.log(`   - Service-in-city: ${totalServiceInCity}`);
console.log(`üìÅ Saved to: ${sitemapPath}`);
